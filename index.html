<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Band Event Cost App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(120deg, #f0f4f8, #ffffff);
            margin: 0;
            padding: 30px 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #222;
        }

        .container {
            background-color: #fff;
            width: 100%;
            max-width: 520px;
            padding: 30px;
            margin: 20px 0;
            border-radius: 16px;
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .main-app {
            border: 3px solid #4A90E2;
        }

        .secondary-app {
            opacity: 0.9;
            background-color: #f8f9fa;
        }

        label {
            display: block;
            margin-top: 15px;
            font-weight: 600;
            color: #555;
        }

        input {
            margin-top: 5px;
            padding: 12px;
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 10px;
            font-size: 15px;
            transition: border 0.3s ease;
        }

        input:focus {
            border-color: #4A90E2;
            outline: none;
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
        }

        button {
            margin-top: 25px;
            width: 100%;
            background: #4A90E2;
            color: white;
            border: none;
            padding: 14px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        button:hover {
            background: #357ABD;
        }

        .result {
            margin-top: 25px;
            text-align: center;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
                border-radius: 12px;
            }

            h2 {
                font-size: 1.5rem;
            }

            input,
            button {
                font-size: 15px;
            }

            .result {
                font-size: 1.1rem;
            }
        }

        .switch {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            margin-top: 15px;
            color: #555;
        }

        .switch input {
            display: none;
        }

        .slider {
            position: relative;
            width: 44px;
            height: 24px;
            background: #ccc;
            border-radius: 24px;
            transition: background 0.3s;
            cursor: pointer;
            display: inline-block;
        }

        .slider:before {
            content: "";
            position: absolute;
            left: 3px;
            top: 3px;
            width: 18px;
            height: 18px;
            background: #fff;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .switch input:checked + .slider {
            background: #4A90E2;
        }

        .switch input:checked + .slider:before {
            transform: translateX(20px);
        }
    </style>
</head>
<body>

<!-- MAIN: Band & Expense Calculator -->
<div class="container main-app">
    <h2>üé∏ The Loopers Band Cost Estimator</h2>
    <form id="bandForm">
        <label for="pricePerPerson">üí∂ Price per Person (‚Ç¨):</label>
        <input type="number" id="pricePerPerson" placeholder="e.g. 200" required/>

        <label for="numPeople">üë• Number of People:</label>
        <input type="number" id="numPeople" placeholder="e.g. 5" required/>

        <label for="soundCost">üîä Sound Cost (‚Ç¨):</label>
        <input type="number" id="soundCost" placeholder="e.g. 450"/>

        <label for="dubaRental">üöê Van Rental (‚Ç¨):</label>
        <input type="number" id="dubaRental" placeholder="e.g. 100"/>

        <label for="dubaTransport">‚õΩ Van Fuel Cost (‚Ç¨):</label>
        <input type="number" id="dubaTransport" placeholder="e.g. 80"/>

        <label for="valiTransport">‚õΩ Vali Fuel Cost (‚Ç¨):</label>
        <input type="number" id="valiTransport" placeholder="e.g. 70"/>

        <label for="cantatBiserica"> ‚õ™ Church Singing (‚Ç¨):</label>
        <input type="number" id="cantatBiserica" placeholder="e.g. 200"/>

        <label class="switch">
            <input type="checkbox" id="needHotel"/>
            üè® Need hotel accommodation
            <span class="slider"></span>
        </label>

        <button type="submit">Calculate Total</button>
    </form>
    <div class="result" id="bandResult"></div>
    <button id="downloadBtn" style="display:none; margin-top: 10px;">‚¨áÔ∏è Download Summary</button>
    <button id="calendarBtn" style="display:none; margin-top: 10px;">üìÖ Add to Calendar</button>
</div>

<!-- SECONDARY: Fuel Calculator & Map -->
<div class="container secondary-app">
    <h2>üí∂ Fuel Cost Helper</h2>
    <form id="calcForm">
        <label for="distance">Distance (km):</label>
        <input type="number" id="distance" placeholder="e.g. 150" required/>

        <label for="consumption">Consumption (L/100km):</label>
        <input type="number" id="consumption" step="0.1" placeholder="e.g. 8" required/>

        <button type="submit">Calculate Fuel Cost</button>
    </form>
    <div class="result" id="result"></div>
</div>

<!-- JavaScript -->
<script>
    // Fuel Cost Calculator
    document.getElementById("calcForm").addEventListener("submit", function (e) {
        e.preventDefault();
        const km = parseFloat(document.getElementById('distance').value);
        const rawConsumption = parseFloat(document.getElementById('consumption').value);
        const resultEl = document.getElementById('result');

        if (isNaN(km) || isNaN(rawConsumption)) {
            resultEl.textContent = "‚ö†Ô∏è Please enter valid numbers.";
            resultEl.style.color = "#D32F2F";
            return;
        }

        const consumption = rawConsumption / 100;
        const result = ((km * consumption) * 8) / 5;

        resultEl.style.color = "#2e7d32";
        resultEl.innerHTML =
            `<div style="font-size: 1.8rem; font-weight: bold; color: #2e7d32; margin-top: 10px;">
            ‚õΩ FUEL COST: ‚Ç¨${result.toFixed(2)}
        </div>`;
    });

    // Band Cost Calculator
    document.getElementById("bandForm").addEventListener("submit", function (e) {
        e.preventDefault();

        const pricePerPerson = parseFloat(document.getElementById('pricePerPerson').value);
        const numPeople = parseInt(document.getElementById('numPeople').value);
        const sound = parseFloat(document.getElementById('soundCost').value) || 0;
        const dubaRental = parseFloat(document.getElementById('dubaRental').value) || 0;
        const dubaTransport = parseFloat(document.getElementById('dubaTransport').value) || 0;
        const valiTransport = parseFloat(document.getElementById('valiTransport').value) || 0;
        const cantatBiserica = parseFloat(document.getElementById('cantatBiserica').value) || 0;
        const needHotel = document.getElementById('needHotel').checked;
        const resultEl = document.getElementById('bandResult');

        if (isNaN(pricePerPerson) || isNaN(numPeople)) {
            resultEl.textContent = "‚ö†Ô∏è Please enter the required fields.";
            resultEl.style.color = "#D32F2F";
            return;
        }

        const bandTotal = pricePerPerson * numPeople;
        const extras = sound + dubaRental + dubaTransport + valiTransport + cantatBiserica;
        const total = bandTotal + extras;

        const expirationDate = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000);
        const day = String(expirationDate.getDate()).padStart(2, '0');
        const month = String(expirationDate.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed
        const year = expirationDate.getFullYear();
        const offerExpiration = `${day}-${month}-${year}`;

        // Prepare the biserica line if applicable
        let bisericaLine = "";
        if (cantatBiserica > 0) {
            bisericaLine = `<li>+cantat la ceremonia religioasa pian si voce 2-4 piese</li>`;
        }

        // Prepare hotel line if needed
        let hotelLine = "";
        if (needHotel) {
            hotelLine = `<li>‚Å†‚Å†1 noapte de cazare din <em><b>XX->XX MONTH</b></em> pentru 5 sau 6 persoane in functie de pachetul ales</li>`;
        }

        resultEl.innerHTML = `
    <div style="font-size: 1rem; color: #555;">üéµ Band: ‚Ç¨${bandTotal.toFixed(2)}</div>
    <div style="font-size: 1rem; color: #777;">‚ûï Extras: ‚Ç¨${extras.toFixed(2)}</div>
    <div style="font-size: 1.8rem; font-weight: bold; color: #2e7d32; margin-top: 10px;">
        üßæ TOTAL PRICE: ‚Ç¨${total}
    </div>

    <div style="margin-top: 30px; text-align: left; color: #333; line-height: 1.6;">
        <p>==================================</p>
        <p>Salut CLIENT,</p>
        <p>Am revenit cu oferta pentru <strong>DATE</strong>, <strong>LOCATION</strong></p>

        <h3>Ce oferim la eveniment:</h3>
        <ul>
            <li>‚úÖ Garanta ca vom oferi momente de neuitat care vor dainui o viata intreaga pentru voi cat si pentru invitatii vostri</li>
            <li>‚úÖ Momente speciale:
                <ul>
                    <li>‚Å† ‚Å†Intrare miri cu muzicƒÉ live</li>
                    <li>‚Å† ‚Å†3-4-5 sesiuni live (30-40 min) in functie de felurile de mancare servite</li>
                    <li>‚Å† ‚Å†Concert interactiv cu invita»õii (in functie de dorinta voastra si vibe)</li>
                    <li>‚Å† ‚Å†Moment muzical la intrarea tortului</li>
                    <li>‚Å† ‚Å†Anunturi</li>
                </ul>
            </li>
            <li>‚úÖ Repertoriu variat: Jazz, lounge, pop, piese cre»ôtine</li>
            <li>‚úÖ Flexibilitate: AdaptƒÉm volumul »ôi dinamica muzicii √Æn func»õie de atmosferƒÉ</li>
            <li>‚úÖ Sunet: Asiguram sunetul pe durata evenimentului la masa</li>
        </ul>

        <h3>Pachete disponibile:</h3>
        <p>üéµ<b>Full Band</b> ‚Äì ‚Ç¨${total}
        <ul>
        <li>
        Pian, voce, tobe, bass, chitara electrica, saxofon, sunet</li>
        ${bisericaLine}
</ul>
        </p>


        <p>üéµ<b>Small Band</b> ‚Äì ‚Ç¨${total - pricePerPerson}
        <ul>
            <li>
                Pian, voce, tobe, bass, sunet, chitara electrica, <b>SAU</b> saxofon</li>
            ${bisericaLine}
        </ul>
        </p>


        <h3>üö©Costuri adi»õionale:</h3>
        <ul>
            <li>‚Å† ‚Å†Avans: ‚Ç¨350 pentru rezervarea datei (restul la finalul nun»õii, √Æn valutƒÉ)</li>
                ${hotelLine}
            <li>‚Å† ‚Å†In onorariul mentionat mai sus este <strong>inclus</strong> si transportul</li>
        </ul>

        <h3>üö©Op»õiuni suplimentare:</h3>
        <ul>
            <li>‚Å† ‚Å†Momente personalizate pe parcursul evenimentului</li>
        </ul>

        <p>
            üî∑ Oferta valabila pana la data de <strong>${offerExpiration}</strong><br/>
            üî∑ Pentru orice fel de intrebari va stam la dispozitie pentru a le discuta si a va ajuta cu raspuns si gidare.<br/>
            üî∑ DacƒÉ oferta este pe placul vostru, blocƒÉm data prin achitarea avansului.
        </p>
        <p>=================================</p>
    </div>`;


        // show church singing line if applicable
        const cantatBisericaLine = cantatBiserica > 0
            ? `- ‚õ™ Church singing: ‚Ç¨${cantatBiserica.toFixed(2)}\n`
            : "";

        const hotel = needHotel === true
            ? "- üè® 1 noapte de cazare din XX->XX MONTH pentru 5 sau 6 persoane"
            : "";

        const summaryLines = [
            `- üí∂ Band price per person: ‚Ç¨${pricePerPerson.toFixed(2)}`,
            `- üë• Number of people: ${numPeople}`,
            `- üîä Sound cost: ‚Ç¨${sound.toFixed(2)}`,
            `- üöê Van rental: ‚Ç¨${dubaRental.toFixed(2)}`,
            `- ‚õΩ Van fuel cost: ‚Ç¨${dubaTransport.toFixed(2)}`,
            `- ‚õΩ Vali fuel cost: ‚Ç¨${valiTransport.toFixed(2)}`,
            cantatBisericaLine.trim(),
            hotel.trim()
        ].filter(line => line).join('\n');

        const summaryText = `
üßæ TOTAL PRICE: ‚Ç¨${total.toFixed(2)}

${summaryLines}
`;

        const calendarBtn = document.getElementById("calendarBtn");
        calendarBtn.style.display = "block";
        calendarBtn.onclick = () => createICSFile(summaryText);
    });

    function createICSFile(summaryText) {
        const now = new Date();
        const startDate = now.toISOString().split("T")[0].replace(/-/g, "");
        const endDate = new Date(now.getTime() + 86400000).toISOString().split("T")[0].replace(/-/g, "");

        const icsContent = `
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//YourApp//BandEvent//EN
BEGIN:VEVENT
UID:${Date.now()}@bandevent.com
DTSTAMP:${startDate}T000000Z
DTSTART;VALUE=DATE:${startDate}
DTEND;VALUE=DATE:${endDate}
SUMMARY:üé∏ Nunta Loopers
DESCRIPTION:${summaryText.replace(/\n/g, "\\n")}
END:VEVENT
END:VCALENDAR`.trim();

        const blob = new Blob([icsContent], {type: "text/calendar;charset=utf-8"});
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "Band_Event.ics";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    }
</script>
</body>
</html>
